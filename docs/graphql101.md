# GraphQL101

> 개념적인, 원론적인 이해보다는 **현상적인 이해**에 중점을 두고 설명해보자.

## API 란

> Application Programming Interface

API는 이 언어를 직역하면 무슨 말인지 모를수 있다. 그래도 그 중에서 가장 중요한 단어를 꼽으면 **인터페이스**이다. 인터페이스라는 단어의 컴퓨터공학적인 용어로 이해하면 서로 두 개의 시스템, 장치 사이에서 정보나 신호를 주고 받을 수 있는 접점이나 경계면을 뜻한다.([Wiki](<https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4_(%EC%BB%B4%ED%93%A8%ED%8C%85)>)) 처음에 이렇게 인터페이스에 대해서 말하고 나서 실제로 우리가 실무에서 사용하는 API를 접하면, 정의와 현실에서 오는 괴리감을 느낄 수 있다. 그런데 조금만 실무적으로 생각해보자. 보통 이렇게 프런트 개발자가 백엔드 개발자에게 이렇게 말한다.

```
"계정관련 API는 언제쯤 완성이 되나요?"
```

여기서 어떤 말이 생략되었는지 살펴보면, `프런트(브라우저 or 프런트서버 ... )에서 백엔드 서버로 호출할 수 있는` API는 언제쯤 완성이 되나요 라고 해석할 수 있다.

몇 가지를 이어서 생각해보자.

- API는 인터페이스이다.
- 인터페이스는 두 시스템을 연결해주는 뭔가이다.
- 여기서 두 시스템이란 프런트 - 백엔드 서버이다.
- 호출한다? → 일반적으로 URL을 호출한다.(해당 문맥상)
- 그러면 API는 두가지 시스템을 연결해주는 URL이다.

그래서 내가 생각하는 API의 정의는 특정 두 시스템을 연결하는데, **어떻게** 연결하는지를 알려주는 명세서, 설명서라고 말할 수 있다.

## REST API

> REpresentational State Transfer

사실 REST, RESTFUL, REST API 등등 이와 관련된 용어도 다양하게 불리우고, 이러한 개념을 명확하게 잡기위해서 찾다보면 꼬리에 꼬리를 무는 상황을 맞이하게 된다. 그러다가 갈길을 잃고 이해보다 그냥 대충 이러하다는 의미로 끝나곤한다.(나 역시 그래왔고, 이 글을 쓰고 있는 지금도 내가 과연 REST API라는 개념을 정확히 이해하고 있을까라는 의문을 가지고 있다.)

REST는 HTTP 통신을 통해서 컴퓨터 간의 네트워크를 연결할 때, **어떻게 하면 HTTP를 잘 활용하여 연결할 수 있는지**를 알려주는 설계 방법, 아키텍쳐 스타일이라고 할 수 있다. 즉 REST API란 서버와 클라이언트 간에 네트워크 통신을 어떻게 나타낼지를 알려주는 **몇가지 규칙**을 지닌 URL 명세서라고 할 수 있다.

여기서 몇가지 규칙에 대해서 살펴보자.

- 자원

  ```
  /2/users/:id/bookmarks - 1)
  /2/tweets/:id/liking_users - 2)
  /2/users/:id/liked_tweets - 3)
  ```

  위 3개의 URL은 URL만으로도 그 기능을 예상할 수 있다. 적어도 무엇에 대한, 어떤 자원에 대한 것인지를 알 수 있다.

  1. 특정 유저의 북마크한 트윗
  2. 특정 트윗의 좋아요 개수
  3. 특정 유저가 좋아요한 트윗

  위처럼 일반적으로 명사를 통해서 어떤 자원에 대한 요청인지를 표현한다.

- 행위

  그렇다면 아래의 URL은 어떤 자원에 대한 것일까?

  ```
  /2/users/:id/following - 1)
  /2/users/:id/following - 2)
  ```

  1),2)의 URL은 모두 특정 유저의 팔로잉에 대한 요청이다. 그런데 같은 URL로 된 API가 2개가 있다? 뭔가 이상하다. 즉, 해당 요청은 같은 자원에 대한 다른 행위를 요청하는 것이다. 즉 한개는 GET, 다른 하나는 POST 이다. 이처럼 HTTP 메서드를 통해서 해당 자원을 어떻게 처리할지를 나타낸다. 보통, GET, POST, PUT, DELETE를 통해서 자원에 대한 CRUD를 표현한다.

이 외에도 여러가지, 조금은 디테일한 규칙과 스타일이 존재한다. 하지만 실무에는 정확한, 타이트한 규격보다는 REST에 대한 기준을 을 베이스로 하되, 주어진 상황에 맞는 핏한 REST API를 만들어서 사용한다는 느낌을 많이 받았다. 현실에 대한 문제를 가장 효율적으로 해결하는 방법의 토대로서 REST 아키텍쳐를 사용하는게 가장 잘 사용하는 것이 아닐까 하는 생각을 한다.

> [참고](https://meetup.toast.com/posts/92) | [참고영상](https://www.youtube.com/watch?v=iOueE9AXDQQ)

## GraphQL이 등장한 이유

> GraphQL이 해결하려는 문제는 무엇인가?, 기존의 기술, REST API가 가진 문제는 무엇이었을까?

- over-fetching

- under-fetching

## GraphQL에서 나오는 용어들

- Apollo Server?

- gql``

- typeDefs

- type Query
